<script>
    /*this.OnTick = function () {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        this.SetViewData(`${hours}:${minutes}:${seconds}`);
    }*/

    this.aniValue = 0;
    this.aniDir = 1;

    this.OnDraw = function () {
        const canvas = document.getElementById('cnv');
        const ctx = canvas.getContext('2d');

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.strokeStyle = 'blue';
        ctx.lineWidth = 1;
        ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);

        if (this.currentDataStr != null) {
            const data = JSON.parse(this.currentDataStr)
            ctx.font = '20pt Arial';
            ctx.fillStyle = '#0A5';
            ctx.fillText(data.Price1 + "." + data.Price2, canvas.width / 2 + this.aniValue, canvas.height / 2);
        }

        this.aniValue += this.aniDir;

        if (this.aniValue > 100) {
            this.aniDir = -1;
        }
        if (this.aniValue < 0) {
            this.aniDir = 1;
        }

        requestAnimationFrame(this.OnDraw);
    }
</script>